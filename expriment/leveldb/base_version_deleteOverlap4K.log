/usr/bin/x86_64-linux-gnu-gcc-8 -O3 -DBASE_VERSION  -Wall -fPIC -c  awn.c statistics.c tree.c debug.c mem.c
awn.c: In function ‘deleteRec’:
awn.c:240:18: warning: unused variable ‘b’ [-Wunused-variable]
   struct memRec *b = *searchRes;
                  ^
/usr/bin/x86_64-linux-gnu-gcc-8 -O3 -DBASE_VERSION  -shared -fPIC  -o libawn.so  awn.o statistics.o tree.o debug.o mem.o  
mkdir -p /usr/local/lib
mkdir -p /usr/local/include/awn
cp -p libawn.so /usr/local/lib
cp -p awn.h /usr/local/include/awn
ldconfig
base version
dbPath:/pmem/db128/
+ echo

+ echo

+ /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=128 --db=/pmem/db128/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:02:59 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000
RawSize:    137.3 MB (estimated)
FileSize:   76.3 MB (estimated)
------------------------------------------------
fillrandom   :       4.994 micros/op;   27.5 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:65697120
MSG(F:ts_print_statistics L:30): ts_write bytes :295416483
MSG(F:ts_print_statistics L:32): ts_write same bytes :56820750, occupy 19.23%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7fabd1da53a0, pid:35789, ppid:35766
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :138991, metadata occupy 1.51% write data.

MSG(F:fini L:1727):fileMap_t: timing = 340 us
MSG(F:fini L:1727):fileUnmap_t: timing = 2162 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 33233 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 496382 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 922206 us
MSG(F:fini L:1727):ts_write_t: timing = 341185 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	0m7.361s
user	0m5.774s
sys	0m4.478s
+ set +o xtrace
444582539	/pmem/db128/


dbPath:/pmem/db256/
+ echo

+ echo

+ /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=256 --db=/pmem/db256/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:03:04 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     256 bytes each (128 bytes after compression)
Entries:    1000000
RawSize:    259.4 MB (estimated)
FileSize:   137.3 MB (estimated)
------------------------------------------------
fillrandom   :       7.996 micros/op;   32.4 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:97467328
MSG(F:ts_print_statistics L:30): ts_write bytes :831402143
MSG(F:ts_print_statistics L:32): ts_write same bytes :238961799, occupy 28.74%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7f1c642683a0, pid:35793, ppid:35766
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :377529, metadata occupy 1.45% write data.

MSG(F:fini L:1727):fileMap_t: timing = 853 us
MSG(F:fini L:1727):fileUnmap_t: timing = 3609 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 131586 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 795991 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 1458056 us
MSG(F:fini L:1727):ts_write_t: timing = 839054 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	0m8.106s
user	0m7.597s
sys	0m3.624s
+ set +o xtrace
1109991881	/pmem/db256/


dbPath:/pmem/db512/
+ echo

+ echo

+ /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=512 --db=/pmem/db512/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:03:12 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     512 bytes each (256 bytes after compression)
Entries:    1000000
RawSize:    503.5 MB (estimated)
FileSize:   259.4 MB (estimated)
------------------------------------------------
fillrandom   :      17.756 micros/op;   28.4 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:143385344
MSG(F:ts_print_statistics L:30): ts_write bytes :2387441595
MSG(F:ts_print_statistics L:32): ts_write same bytes :837884793, occupy 35.10%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7f594de6a3a0, pid:35797, ppid:35766
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :919379, metadata occupy 1.23% write data.

MSG(F:fini L:1727):fileMap_t: timing = 3062 us
MSG(F:fini L:1727):fileUnmap_t: timing = 4940 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 443160 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 1445460 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 2441596 us
MSG(F:fini L:1727):ts_write_t: timing = 2183691 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	0m17.882s
user	0m11.811s
sys	0m9.495s
+ set +o xtrace
2922468379	/pmem/db512/


dbPath:/pmem/db1024/
+ echo

+ echo

+ /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=1024 --db=/pmem/db1024/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:03:30 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     1024 bytes each (512 bytes after compression)
Entries:    1000000
RawSize:    991.8 MB (estimated)
FileSize:   503.5 MB (estimated)
------------------------------------------------
fillrandom   :      32.852 micros/op;   30.2 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:165507264
MSG(F:ts_print_statistics L:30): ts_write bytes :5443116314
MSG(F:ts_print_statistics L:32): ts_write same bytes :3025422375, occupy 55.58%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7efd580863a0, pid:35814, ppid:35766
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :2062648, metadata occupy 1.21% write data.

MSG(F:fini L:1727):fileMap_t: timing = 7528 us
MSG(F:fini L:1727):fileUnmap_t: timing = 13690 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 1553449 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 2127993 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 3344472 us
MSG(F:fini L:1727):ts_write_t: timing = 4706334 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	0m33.003s
user	0m18.516s
sys	0m18.445s
+ set +o xtrace
6502603173	/pmem/db1024/


dbPath:/pmem/db2048/
+ echo

+ echo


time /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=2048 --db=/pmem/db2048/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:17:11 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     2048 bytes each (1024 bytes after compression)
Entries:    1000000
RawSize:    1968.4 MB (estimated)
FileSize:   991.8 MB (estimated)
------------------------------------------------
fillrandom   :      82.840 micros/op;   23.8 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:224481312
MSG(F:ts_print_statistics L:30): ts_write bytes :14674167633
MSG(F:ts_print_statistics L:32): ts_write same bytes :8305208929, occupy 56.60%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7fcb7de5e3a0, pid:35883, ppid:34794
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :3123386, metadata occupy 0.68% write data.

MSG(F:fini L:1727):fileMap_t: timing = 22889 us
MSG(F:fini L:1727):fileUnmap_t: timing = 48052 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 4119628 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 4382078 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 5387038 us
MSG(F:fini L:1727):ts_write_t: timing = 13708905 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	1m22.963s
user	0m38.773s
sys	0m50.805s
16774568846	/pmem/db2048/




dbPath:/pmem/db4096/
+ echo

+ echo

+ /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=4096 --db=/pmem/db4096/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:05:13 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     4096 bytes each (2048 bytes after compression)
Entries:    1000000
RawSize:    3921.5 MB (estimated)
FileSize:   1968.4 MB (estimated)
------------------------------------------------
fillrandom   :     171.097 micros/op;   22.9 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:277876128
MSG(F:ts_print_statistics L:30): ts_write bytes :36215066068
MSG(F:ts_print_statistics L:32): ts_write same bytes :26155799680, occupy 72.22%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7f5d447a23a0, pid:35823, ppid:35766
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :6336928, metadata occupy 0.56% write data.

MSG(F:fini L:1727):fileMap_t: timing = 70696 us
MSG(F:fini L:1727):fileUnmap_t: timing = 128315 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 12696509 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 8223489 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 6385699 us
MSG(F:fini L:1727):ts_write_t: timing = 33535815 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	2m51.570s
user	1m21.583s
sys	1m41.324s
+ set +o xtrace
40397037865	/pmem/db4096/


dbPath:/pmem/db8192/
+ echo

+ echo

+ /home/xzjin/leveldb_modified/build/db_bench --benchmarks=fillrandom --value_size=8192 --db=/pmem/db8192/ --block_size=4096
MSG(F:init L:311):Initializing the libawn.so, BASE.
MSG(F:init L:316):NOT DELETE_TREENODE.
MSG(F:init L:322):NOT BYTE_COMPARE.
MSG(F:initMemory L:149):Allocate 162304 bytes memory.
MSG(F:init L:408):init: END
LevelDB:    version 1.22
Date:       Thu Jan 13 01:08:04 2022
CPU:        40 * Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz
CPUCache:   28160 KB
Keys:       16 bytes each
Values:     8192 bytes each (4096 bytes after compression)
Entries:    1000000
RawSize:    7827.8 MB (estimated)
FileSize:   3921.5 MB (estimated)
------------------------------------------------
fillrandom   :     364.557 micros/op;   21.5 MB/s     
MSG(F:ts_print_statistics L:10):====================== IO statistics: ======================
MSG(F:ts_print_statistics L:11): mmap 0
MSG(F:ts_print_statistics L:14): memcpy READ: count 0, size 0, average 0
MSG(F:ts_print_statistics L:17): memcpy WRITE: count 0, size 0, average 0
MSG(F:ts_print_statistics L:19): RECTREENODEPOOLIDX:0
MSG(F:ts_print_statistics L:21): TAILHEADPOOLIDX:0
MSG(F:ts_print_statistics L:22): RECBLOCKENTRYPOOLIDX:0
MSG(F:ts_print_statistics L:23): RECARRPOOLIDX:0
MSG(F:ts_print_statistics L:28): Really used memory:944000
MSG(F:ts_print_statistics L:29): Total allocated memory:314092416
MSG(F:ts_print_statistics L:30): ts_write bytes :81121640516
MSG(F:ts_print_statistics L:32): ts_write same bytes :62437559539, occupy 76.97%
MSG(F:ts_print_statistics L:33):ts_write_same_size addr :0x7ff58e2e13a0, pid:35830, ppid:35766
MSG(F:ts_print_statistics L:35): ts_write not found bytes :0, occupy 0.00%
MSG(F:ts_print_statistics L:37): ts_write new metadata item :7621853, metadata occupy 0.30% write data.

MSG(F:fini L:1727):fileMap_t: timing = 202459 us
MSG(F:fini L:1727):fileUnmap_t: timing = 329092 us
MSG(F:fini L:1727):memcmp_asm_t: timing = 30000486 us
MSG(F:fini L:1727):mem_from_mem_trace_t: timing = 10209151 us
MSG(F:fini L:1727):memcpy_from_mapped_trace_t: timing = 7683923 us
MSG(F:fini L:1727):ts_write_t: timing = 62028777 us
MSG(F:fini L:1727):compare occupy ts_write: 0.00%


real	6m4.825s
user	2m32.801s
sys	3m52.029s
+ set +o xtrace
89406443161	/pmem/db8192/


